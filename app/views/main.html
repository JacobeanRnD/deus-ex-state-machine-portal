<div class="row">
    <div ng-show="loading" class="text-center col-md-12">
        <p>Loading StateCharts</p>
    </div>
    <!-- <div ng-class="loading ? 'hide' : (stateChart.instances ? 'col-md-4' : 'col-md-2')" class="sidebar hide "> -->
    <div ng-hide="loading" class="sidebar col-md-2 no-float">
        <div class="list">
            <div class="row">
                <div class="col-md-10">
                    <h4>{{Session.username}}'s Statecharts</h4>
                </div>
                <div class="col-md-2">
                    <a ng-click="createStatechart()" title="Create new statechart">
                        <span class="glyphicon glyphicon-plus"></span>         
                    </a>
                </div>
            </div>
            <ul ng-show="stateCharts">
                <li ng-repeat="chart in stateCharts">
                    <a ng-click="selectStateChart(chart)" ng-class="chart.name === stateChart.name ? 'selected' : ''">
                        {{chart.name}}
                    </a>
                    <a ng-click="deleteStateChart(chart)">
                        <span class="glyphicon glyphicon-remove"></span>
                    </a>
                </li>
            </ul>
            <div ng-hide="stateCharts">
                Please add a new Statechart
                <a ng-click="createStatechart()" title="Create new statechart">
                        <span class="glyphicon glyphicon-plus"></span>         
                </a>
            </div>
        </div>
        <div ng-show="stateChart.name" class="list">
            <div class="row">
                <div class="col-md-10">
                    <h4>Active Instances</h4>
                </div>
                <div class="col-md-2">
                    <a ng-click="createInstance(stateChart.name)"  title="Create new instance">
                        <span class="glyphicon glyphicon-plus"></span>         
                    </a>
                </div>
            </div>
            <ul>
                <li ng-repeat="instance in stateChart.instances">
                    <a ng-click="selectInstance(instance)" ng-class="instance.id === stateChart.instance.id ? 'selected' : ''">
                        {{instance.id}}
                    </a>
                    <a ng-click="deleteInstance(instance)">
                        <span class="glyphicon glyphicon-remove"></span>
                    </a>
                </li>
            </ul>
        </div>
    </div>


    <div class="col-md-8 no-float">
        <div class="row chart" ng-show="stateChart.name || isCreating">
            <div class="row text-center" ng-hide="stateChart.name ||Â isCreating">
                    <a ng-click="createStatechart()" class="btn btn-primary">
                        Create new Statechart <span class="glyphicon glyphicon-plus"></span>         
                    </a>
            </div>

            <div class="col-md-12 header">
                <div class="text-left col-md-4">
                    <h3 ng-hide="isCreating">{{stateChart.name}}</h3>
                    <h3 ng-show="isCreating">New Statechart</h3>
                </div>
                <div class="col-md-2">
                    <a class="btn btn-primary" ng-click="saveStatechart(stateChart.content)">Save</a>
                </div>
                <div class="col-md-6 text-right">
                    <h3 ng-show="stateChart.instance" class="text-muted">Instance: {{stateChart.instance.id}}</h3>
                </div>
            </div>
            <div class="col-md-6 code" ng-class="stateChart.instance ? 'hidden' : ''">
                <h3>Code</h3>
                <div ng-model="stateChart.content"
                    ui-ace="{ mode: 'xml',
                              firstLineNumber: 5,
                              onChange: aceChanged,
                              changeSession: aceChangeSession
                            }" class="editor"></div>
            </div>
            <div class="col-md-6 code" ng-class="stateChart.instance ? '' : 'hidden'">
                <h3>Events</h3>
                <ul>
                    <li ng-repeat="event in stateChart.instance.events track by $index">
                        {{event}}
                    </li>
                </ul>
            </div>
            <div class="visual col-md-6">
                <div ng-show="stateChart.instance" class="col-md-12">
                    <label for="inputeventname">Event</label>
                    <input type="text" id="inputeventname" ng-model="eventname">
                    <label for="inputeventdata">Data</label>
                    <input type="text" id="inputeventdata" ng-model="eventdata">
                    <a class="btn btn-primary" ng-click="sendEvent(eventname, eventdata)">Send Event</a>
                </div>
                <div class="col-md-12">
                    <h3>Result</h3>
                </div>
                <div class="col-md-12" id="scxmlTrace"></div>
            </div>
            
        </div>


    </div>
</div>
